
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    App.cable.subscriptions.create ({ channel: "<%=current_user.sound_group_id%>"});
  });
  console.log("<%=current_user.sound_group_id%>");
</script>

<div class = 'sound-group-show' >

  <label>Members:
    <div class = 'subscribed-users'>
      <% @users.each do |user| %>
        <%= user.username %>
      <% end %>
    </div>
  </label>
  <%= link_to "leave group", sound_groups_url %>

  <div class = 'speaker-arrangement'>
    <% if current_user.id == @sound_group.leader.id %>
    <select name="tracklist">
      <% @tracks.each do |track| %>
        <option value="<%=track.id%>"><%=track.name%></option>
      <% end %>
    </select>
    <br>
    <button type="button">Play!</button>
    <% else  %>
      <h5>Sound Group Leader will determine the song. </h5>
    <% end %>
  <div>

  <div class = 'music player'>
    <div>
      <%=  %>
    </div>

    <div>
      <audio src="" controls>
      </audio>
    </div>

    <div>
      <%= link_to "Play", "#{@sound_group.id}/play" %>
      <a href="#" onclick="this.style.backgroundColor='#990000'">Paint it red</a>
    </div>

  </div>






</div>
